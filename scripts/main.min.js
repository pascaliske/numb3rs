!function(a,t,e){a.fn.numb3rs=function(t){function r(a){if(t.debug&&(g("-------- debug --------"),g("number: "+b)),i(),S=a.parent(".row").attr("id"),actualSquare=a.attr("id"),actualRow=d(actualSquare),actualPlace=h(actualSquare),null===I?(t.debug&&g("actualSquare: "+actualSquare+" (actualRow: "+actualRow+", actualRow: "+actualRow+" (start-square))"),n(actualSquare),u(actualSquare)):s(actualSquare)?(t.debug&&g("actual square: "+actualSquare+" (row: "+actualRow+", place in row: "+actualRow+" (next-square))"),u(actualSquare)):(l(v),m("Error! This square is in the wrong place!")),t.debug){g("history:");for(var e=0;e<y.length;e++)g("-- "+y[e]);g("number: "+b),g("------ end debug ------")}}function n(t){I=t,a("#reset, #undo").removeClass("inactive"),a("#grid #"+t).addClass("start")}function u(t){a("#grid #"+t).hasClass("filled")?(l(v),m("Sorry! Number can't be changed! ("+S+"s"+t+")")):(l(t),a("#grid #"+t).html(b),a("#grid #"+t).addClass("filled").attr("data-value",b),y.push(t),v=t,f(b),p(t),b++)}function s(a){if(I!==a){var t=h(a),e=d(a),r=h(v),n=d(v);return e===parseInt(n-3)&&t===r?!0:e===parseInt(n+3)&&t===r?!0:e===n&&t===parseInt(r-3)?!0:e===n&&t===parseInt(r+3)?!0:e===parseInt(n-2)&&t===parseInt(r-2)?!0:e===parseInt(n-2)&&t===parseInt(r+2)?!0:e===parseInt(n+2)&&t===parseInt(r-2)?!0:e===parseInt(n+2)&&t===parseInt(r+2)?!0:!1}return!0}function l(e){if(null!==I){var r=(h(e),d(e),h(v),d(v),new Array);t.debug&&g("correct squares:");for(var n=0;n<r.length;n++)a(r[n]).hasClass("filled")||(t.debug&&g(n+" "+r[n]),a("#grid #"+r[n]).addClass("hint"))}else m("No square selected - Please select the start square!")}function i(){a("td").each(function(){a(this).hasClass("hint")&&a(this).removeClass("hint")})}function o(){var t=y.indexOf(actualSquare);2>C?confirm("Do you really want to undo the last square?")?(b--,f(parseInt(b-1)),a("#"+v).removeClass("filled").removeAttr("data-value").html(""),v=y[parseInt(t-1)],C++):(b++,g("(after) number: "+b)):m("You have only two undo's per round!")}function c(){I=null,v=e,w=0,C=0,b=1,y=new Array,a("#header .display").html("0"),a("td").each(function(){a(this).removeClass("filled"),a(this).removeClass("hint"),a(this).removeClass("start"),a(this).removeAttr("data-value"),a(this).html("")})}function d(a){split=(a+"").split("");var t=parseInt(split[0]);return t}function h(a){split=(a+"").split("");var t=parseInt(split[1]);return t}function f(t){a("#header .display").html(t)}function p(t){w=parseInt(0===parseInt(t%2)?w+20:w+15),a("#header .score").html(w)}function m(a){t.debug&&console.error(a),alert(a)}function g(a){console.log(a)}var v,q,I=null,b=1,w=0,y=new Array,S="",C=0;a(".square",this).on("click",function(){r(a(this))}),a("#hint").on("click",function(){l(q)}),a("#reset").on("click",function(){confirm("Do you really want to reset this game?")&&c()}),a("#undo").on("click",function(){o()}),a("#redo").on("click",function(){var a=y.indexOf(actualSquare);a===parseInt(y.length-1)?m("nicht m√∂glich!"):alert("redo active")})},a.fn.numb3rs.defaults={debug:!1}}(jQuery);